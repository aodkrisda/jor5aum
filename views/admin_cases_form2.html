


<div class="panel panel-default">
    <div class="panel-heading" style="padding-bottom:0px;">
        <h2 class="text-center" style="margin-top:0px">รับสำนวนและร่างคำพิพากษา {{editingItem.user_id | lookup_court}}</h2>
    </div>

    <div class="panel-body" style="padding-bottom:0px;">

        <form class="form form-horizontal readonly" name="form" style="padding-top:25px;padding-bottom:50px;">
           
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">เลขดำ</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.number_black}}">
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">เลขแดง</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.number_red}}">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">โจทก์</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.plaintiff}}">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">จำเลย</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.defendant}}">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">ประเภทคดี</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.type_id | lookup_type:'name':true}} - {{editingItem.type_id | lookup_type}}">
                    </div>
                </div>
            <div class="form-group col-md-6">
                <label class="control-label col-md-4">ข้อหาพิมพ์ปก</label>
                <div class="col-md-8" ng-init="_xedit=false">
                    <div class="input-group">
                        <input type="text" ng-readonly="!_xedit" class="form-control input-md" ng-model="editingItem.title">
                        <span class="input-group-addon" title="แก้ไข" ng-click="_xedit=true"><span class="glyphicon glyphicon-pencil"></span></span>
                    </div>
                </div>
            </div>

                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">วันที่รับฟ้อง</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.date_case | thai_date}}">
                    </div>
                </div>
            <div class="form-group col-md-6">
                <label class="control-label col-md-4">ข้อหาสถิติ</label>
                <div class="col-md-8">

                    <div class="input-group" ng-controller="TopicsCtrl" ng-init="_xedit2=false">
                        <div class="form-control" ng-class="{readonly:!_xedit2}" style="height:auto;min-height:36px;">
                            <custom-choices ng-model="editingItem.topic_ids"></custom-choices> 
                        </div>
                        <div class="input-group-addon" style="vertical-align:top;" title="แก้ไข" id="edit-topics" ng-click="ifcall(editingItem.type_id>0,popupTopics, editingItem);_xedit2=true">
                            <span style="background:none"><span class="glyphicon glyphicon-pencil"></span></span>
                        </div>
                    </div>

                </div>
            </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">วันที่ศาลส่งสำนวน</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.date_sent2 | thai_date}}">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">เลขที่ส่งสำนวนของศาล</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.number_sent2}}">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">ชื่อผู้พิพากษาเจ้าของสำนวน</label>
                    <div class="col-md-8">
                        <input type="text" readonly class="form-control input-md" value="{{editingItem.judge_id  | lookup_judge}}">
                    </div>
                </div>
            <div class="form-group col-md-6">
                <label class="control-label col-md-4">วันที่นัดฟังคำพิพากษา</label>
                <div class="col-md-8">
                    <input type="text" readonly class="form-control input-md" value="{{editingItem.date_ap  | thai_date}}">
                </div>
            </div>
                <div class="row clearfix"></div>
                <hr />
                <div >
                    <div class="col-md-4 col-md-offset-4" ng-if="!editingItem.auto_received_num">
                        <button  class="btn btn-success btn-lg btn-block" ng-click="setRunNumber(editingItem,$event)"><span class="glyphicon glyphicon-sort-by-attributes"></span> รันเลขรับสำนวน</button>
                    </div>
                    <div class="col-md-4 col-md-offset-4" ng-if="editingItem.auto_received_num">
                        <h3 title="คลิกเพื่อลบเลขรับสำนวน"><span class="btn text-primary" data-placement="top" data-auto-close="true" data-trigger="click" bs-popover data-template="custom.confirm.autonumber.html" style="font-size:1em">เลขรับสำนวน  <span class="glyphicon glyphicon-paperclip"></span> {{editingItem.auto_received_num}}</span> </h3>
                    </div>
                    <div class="row clearfix"></div>
                    <hr />


                </div>

            <fieldset ng-disabled="!editingItem.auto_received_num">
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">สำนวนพ่วง</label>
                    <div class="col-md-8">
                         <div class="input-group">
                             <div class="input-group-addon" style="background-color:#fefefe"><input type="checkbox" ng-model="editingItem.link_checked" ng-true-value="'1'" ng-false-value="'0'"/></div>
                             <input type="text" ng-disabled="editingItem.link_checked!='1'" class="form-control" ng-model="editingItem.link_ids" placeholder="ไม่มีสำนวนพ่วง" />
                         </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">สำนวนรวม</label>
                    <div class="col-md-8">
                        <div class="input-group">
                            <div class="input-group-addon" style="background-color:#fefefe"><input type="checkbox" ng-model="editingItem.add_checked" ng-true-value="'1'" ng-false-value="'0'"/></div>
                            <p type="text" ng-disabled="editingItem.add_checked!='1'" class="form-control" >
                                <span  class="label label-mr label-black" ng-repeat="key in editingItem.add_ids |split">{{key}}</span>
                                <span ng-if="!editingItem.add_ids" class="text-muted">ไม่มีสำนวนรวม</span>
                            </p>
                            <div class="input-group-addon" title="เลือกคดี" ng-controller="MergeCaseCtrl" ng-click="ifcall(editingItem.add_checked=='1',open,'views/custom.select_cases_panel.html',editingItem)"><span class="glyphicon glyphicon-th-list"></span></div>
                        </div>
                    </div>
                </div>  
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">วันที่ภาครับสำนวนคำพิพากษา</label>
                    <div class="col-md-8">
                        <span mode="0" ng-model="editingItem.date_received3" placeholder="ยังไม่มีข้อมูล" custom-date-field></span>
                    </div>
                </div>


                <div class="form-group col-md-6  has-feedback custom-dropdown">
                    <label class="control-label col-md-4">ผลการปฏิบัติ</label>
                    <div class="col-md-8">
                        <div custom-dropdown class="form-control input-md" ng-model="editingItem.result" data-options="result_options"></div>
                        <span class="form-control-feedback"><span class="caret"></span></span>
                    </div>
                </div>

                <div class="row clearfix"></div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">เลขที่รับหนังสือสำนวนของภาค</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control input-md" ng-model="editingItem.number_received3">
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <label class="control-label col-md-4">คำสั่ง อธ. / ตามระเบียบ</label>
                    <div class="col-md-8">

                        <select class="form-control input-md" name="role" ng-model="editingItem.command_id" select-default ng-options="it.id as it.id | lookup_at group by it.checked |iif:'1':'ตรวจ':'ไม่ตรวจ' for it  in Lookups.getAt()">
                            <option value=""></option>
                        </select>
                        <div ng-if="(editingItem.command_id | lookup_at:'checked')=='1'">
                            <label class="checkbox text-danger" style="padding-left:20px">
                                <input type="checkbox" ng-model="editingItem.at_correct" ng-true-value="'0'" ng-false-value="'1'">  ไม่ถูกต้องตามระเบียบ
                            </label>
                            <div ng-if="editingItem.at_correct=='0'">
                                <label style="padding-top:0.5em">เหตุผล</label>
                                <div class="input-group">
                                    <select class="form-control input-md" name="role" ng-model="editingItem.at_result_id" select-default ng-options="it.id as it.id | lookup_at_result  for it  in Lookups.getAtResult()">
                                        <option value=""></option>
                                    </select>
                                    <span class="input-group-addon btn" id="add-at-result" ng-click="popupAtResult()"><span class="glyphicon glyphicon-plus"></span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-if="editingItem.return_checked=='1'">
                    <div class="row clearfix"></div>
                    <hr />
                    <div class="col-md-8 col-md-offset-2" ng-controller="AdminForm2Ctrl as f2ctrl" ng-init="xctrl.f2=f2ctrl;load(editingItem.id)">
                       
                        <div ng-if="editingItem.return2_checked=='1' && items.length" >
                            <h4 style="display:inline;"><strong><span class="glyphicon glyphicon-tags"></span> ภาครับสำนวน (กรณีส่งสำนวนซ้ำเพื่อทบทวนร่างคำพิพากษา)</strong></h4>
                            <div style="margin-top:1em;"></div>
                            <table class="table table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th>ครั้งที่</th>
                                        <th>เลขที่ส่ง</th>
                                        <th>วันที่ส่ง</th>
                                        <th>หมายเหตุ</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="it in items">
                                        <td width="80" class="text-center"><strong>{{$index+1}}</strong></td>
                                        <td width="25%"><input type="text" ng-model="it['number_received']" class="form-control" placeholder="ยังไม่มีข้อมูล" /></td>
                                        <td width="25%"><span mode="0" ng-model="it['date_received']" placeholder="ยังไม่มีข้อมูล" custom-date-field></span></td>
                                        <td><input class="form-control" ng-model="it['note_received']" /></td>
                                    </tr>
                                    <tr ng-if="!items.length">
                                        <td colspan="4">
                                            <h3 class="text-muted text-center">ยังไม่มีรายการส่งสำนวนเพื่อตรวจซ้ำ</h3>
                                        </td>
                                    </tr>
                                </tbody>

                            </table>

                        </div>
                    </div>
                    <div class="row clearfix"></div>
                    <hr />
                </div>
                <div class="col-md-12" style="margin-top:2em">
                    <label class="control-label col-md-2" style="padding-right:3em">หมายเหตุ</label>
                    <div class="col-md-9">
                        <textarea class="form-control" rows="3" ng-model="editingItem.form2_note"></textarea>
                    </div>
                </div>

            </fieldset>
        </form>
    </div>
    <div class="panel-footer">
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <div class="col-md-6">
                    <button type="button" class="btn btn-success btn-block" ng-disabled="!editingItem.auto_received_num" ng-click="saveForm(editingItem,2,xctrl.f2)"><span class="fa fa-save"></span> บันทึกข้อมูล</button>
                </div>
                <div class="col-md-6">
                    <button type="button" class="btn btn-warning btn-block" ng-click="goBack()"><span class="fa fa-close"></span> ยกเลิก</button>
                </div>
            </div>
        </div>
    </div>
</div>

