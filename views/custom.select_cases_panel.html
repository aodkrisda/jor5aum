<div class="modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" style="min-width:720px" ng-controller="CustomTableCtrl as cmt" ng-init="setAPI('admin_cases','',{_court:courtID(),_view:'\'merge\'',search:'searchText'},{_view:true,_court:true,search:false})">
        <style>
            .bg-black {
                background-color: black !important;
                min-width: 180px !important;
            }
            
            .del{color:#CD413D !important}
        </style>
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title"><span class="fa fa-windows"></span> เลือกเลขคดี (สำนวนรวม)
                    <span class="input-group pull-right" style="width:250px;margin-right:30px;padding-top:0px;top:-8px">
                        <input type="text" class="form-control" ng-model="searchText" ng-change="setFilter()" placeholder="ค้นหาเลขคดี" ng-model-options="{ debounce: 500 }" />
                        <div ng-if="!searchText" class="input-group-addon btn btn-default"   title="ค้นหา"><span class="glyphicon glyphicon-search"></span></div>
                        <div ng-if="searchText" class="input-group-addon btn btn-default" ng-click="clearSearch()" title="เลิกค้นหา"><span class="glyphicon glyphicon-remove"></span></div>
                    </span>
                </h4>
            </div>
            <div class="modal-body">
                <div class="panel panel-default" >
                    <table ng-table-resizable ng-table="tableParams" template-pagination="pager-only.html" ng-init="tableParams.hide_limit=true" show-filter="false" class="table table-bordered">
                        <thead class="hidden">
                            <tr>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="it in $data"
                                ng-class="{'bg-success':hasID(it.number_black)}"
                                ng-click="selectRow(it);">
                                <td valign="top">
    
                                    <div style="display:inline-block;padding-left:1em;width:100%">
                                        <div ng-switch="isSelected(it)">
                                            <div ng-switch-when="true" class="pull-right">
                                                <span ng-switch="hasID(it.number_black)">
                                                    <button ng-switch-when="true" title="ไม่รวมสำนวนนี้" class="btn btn-danger" ng-click="removeID(it.number_black)"><span class="glyphicon glyphicon-remove"></span></button>
                                                    <button ng-switch-when="false" title="รวมสำนวนนี้" class="btn btn-success" ng-click="mergeID(it)"><span class="glyphicon glyphicon-plus"></span></button>
                                                </span>
                                            </div>
                                            <div ng-switch-when="false" class="pull-right">
                                                <span ng-if="hasID(it.number_black)" class="fa fa-check fa-2x"></span>
                                            </div>
                                        <div><span class="label label-warning bg-black">{{::it.number_black}}</span>  <strong>{{::it.title}}</strong></div>
                                        <div><small>โจทก์: {{::it.plaintiff}}, จำเลย: {{::it.defendant}}</small></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div style="padding:5px;" ng-if="$ids.length">
                        <hr style="padding:0;margin:0"/>
                        <strong>สำนวนรวม ({{$ids.length}})</strong><br />
                        <span class="label label-mr label-black" ng-repeat="key in $ids">{{key}} <span title="ไม่รวมสำนวนนี้" ng-click="removeID(key)" class="glyphicon glyphicon-remove del" ></span></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-min" ng-click="acceptID();$hide()"><span class="glyphicon glyphicon-ok"></span> ตกลง</button>
                <button type="button" class="btn btn-warning btn-min" ng-click="$hide()"><span class="glyphicon glyphicon-remove"></span> ยกเลิก</button>
            </div>
        </div>
    </div>
</div>